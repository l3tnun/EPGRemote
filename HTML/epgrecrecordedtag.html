<!DOCTYPE html>
<html>
<head>
    <title>録画済み Tag</title>
    <meta name="viewport" content="width=device-width">
    <meta charset="utf-8">
    <link rel="stylesheet" href="/jquery/jquery.mobile.min.css" />
    <link rel="stylesheet" href="/css/pagination.css" />
    <script src="/jquery/jquery.min.js"></script>
    <script src="/jquery/jquery.mobile.min.js"></script>
    <script>
    $(window).load(function() {
        var url = window.location.search;
        query = {};
        array  = url.slice(1).split('&');
        for (var i = 0; i < array.length; i++) {
            vars = array[i].split('=');
            query[vars[0]] = vars[1];
        }

        //上部ボタン処理
        if(typeof query.type == "undefined") { query.type = "KW" }

        if(query.type == "KW") { $("#reserved_words_button").addClass("ui-btn-active"); }
        else if(query.type == "CH") { $("#channel_button").addClass("ui-btn-active"); }

        //pagination処理
        if($('#tag_list').children().length == 0) {
            $(".pagination").css("display", "none");
            return;
        } else if($('#tag_list').children().length < 15) {
            $(".pagination_next").css("visibility", "hidden");
        }

        var pathname = window.location.pathname;
        if(typeof query.num == "undefined" || query.num < 2) {
            $(".pagination_prev").css("visibility", "hidden");
            $(".pagination_name").text("ページ1");
            $(".pagination_next").attr("href", pathname + "?type=" + query.type + "&num=2");
        } else {
            $(".pagination_name").text("ページ" + query.num);
            $(".pagination_next").attr("href", pathname + "?type=" + query.type + "&num=" + (Number(query.num) + 1));
            $(".pagination_prev").attr("href", pathname + "?type=" + query.type + "&num=" + (Number(query.num) - 1))
        }
    });
    </script>
</head>
<body>
<div data-role="header">
    <a href="/epgrec_recorded" target="_self">BACK</a>
    <h1>録画済み Tag</h1>
</div>
<div role="main" class="ui-content">
    <div class="ui-grid-a" style="margin: -18px;">
      <div class="ui-block-a">
        <a href="./tag?type=KW" id="reserved_words_button" class="ui-btn ui-corner-all" TARGET="_self">keywords</a>
      </div>
      <div class="ui-block-b">
        <a href="./tag?type=CH" id="channel_button" class="ui-btn ui-corner-all" TARGET="_self">Channel</a>
      </div>
    </div>

    <ul id="tag_list" style="margin-top: 18px;" data-role="listview">
        @@@TAGLIST@@@
    </ul>
    <div class="pagination" style="margin-top: 18px; margin-bottom: -18px">
        <a class="pagination_prev" herf="#" target="_self"><</a>
        <span class="pagination_name"></span>
        <a class="pagination_next" herf="#" target="_self">></a>
    </div>
</div>
</body>
</html>
